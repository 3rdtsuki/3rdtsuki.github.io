### 一、多元函数微分

#### 1.可微条件

偏导数连续->可微->偏导存在&&函数连续

##### 求全微分

$$
对于显函数f=f(x,y)：df=f'_xdx+f'_ydy
$$

$$
对于隐函数z=z(x,y)，求f(x,y,z)的全微分，隐函数两端微分，求出dz，代入df即可
$$

#### 2.求极值

普通极值：AC-B^2<0，无极值；AC-B^2>0，A<0极大值，A>0极小值；AC-B^2=0，分别将(x0+ε,yo+ε)和(x0+ε,yo-ε)代入目标函数，若结果不同（比如一正一负），可以确定不是极值点。

条件极值：拉格朗日乘数法，经常利用对称性化简

#### 3.几何应用

##### （1）曲线的切线和法平面（和切线）

$$
设曲线的参数方程为x=x(t),y=y(t),z=z(t)
$$

$$
则在(x_0,y_0,z_0)处的切线为\frac{x-x_0}{x'(t_0)}=\frac{y-y_0}{y'(t_0)}=\frac{z-z_0}{z'(t_0)}
$$

$$
法平面为{(x-x_0)}{x'(t_0)}+{(y-y_0)}{y'(t_0)}+{(z-z_0)}{z'(t_0)}=0
$$

$$
备注：平面上曲线在某点处法线斜率是\frac{-1}{切线斜率}，如果切向量为(a,b),法向量(c,d)就可以选(-b,a)，只要不让cd=0即可
$$

##### （2）曲面的法向量和切面

$$
设曲面方程为F(x,y,z)=0
$$

$$
则法向量为(F'_x,F'_y,F'_z)
$$

$$
切平面垂直于法向量F'_x(x-x_0)+F'_y(y-y_0)+F'_z(z-z_0)=0
$$

$$
法线\frac{x-x_0}{F'_x}=\frac{y-y_0}{F'_y}=\frac{z-z_0}{F'_z}
$$

##### （3）方向导数：f沿方向l的变化率

$$
定义：\frac{\partial f}{\partial l}=\frac{f(x+\Delta x,y+\Delta y)-f(x,y)}{\sqrt{(\Delta x)^2+(\Delta y)^2}}
$$


$$
当f可微时，\frac{\partial f}{\partial l}=f'_xcos\alpha+f'_ycos\beta
$$

##### （4）梯度

$$
grad(f)=(f'_x,f'_y)
$$



------

### 二、重积分

### 二重积分

$$
\iint_{D}Pdxdy
$$

对称性：被积区域D关于x轴对称，被积函数是关于y的奇函数，积分值=0

极坐标系：
$$
\iint_{D}dxdy=\iint_{D}\rho d\rho d\theta
$$
:chestnut::

D:x^2+y^2=2ax

> 因为rho随着theta变化，最重要的就是求出rho的上界

$$
\int _{-\pi/2}^{\pi/2}\int _0^{2acos\theta}\rho d\rho d\theta
$$



------

### 三重积分

$$
\iiint_{\Omega}Pdxdydz
$$

对称性：被积区域关于xOy对称，被积函数关于z为奇函数，则积分值=0

#### 柱坐标系：

$$
x=\rho cos\theta,y=\rho sin\theta
$$

rho是点与原点连线在xOy上的投影，对于抛物锥、圆锥就相当于半径

theta是rho与x轴正向的夹角

三重积分z和rho都要按总小到大的顺序定上下界，就算z=1-x^2-y^2，也是r从0到sqrt(1-z)

##### 不论圆心是否在原点，极坐标方程都是一样的

$$
\iiint_{\Omega}dxdydz=\iiint_{\Omega}\rho d\theta d\rho dz
$$

举个:chestnut:：
$$
求z=x^2+y^2,z=1围成的空间体积，下面两种积法均可
$$

$$
\int_0^1dz \int_0^{2\pi}d\theta \int_0^\sqrt{z}\rho d\rho
$$

$$
\int_0^{2\pi}d\theta \int_0^1\rho d\rho \int_0^{\rho^2}dz 
$$

关键是找到rho和z的关系式
$$
z=\rho^2
$$


#### 球坐标系：注意r^2

r是点与原点连线

**phi是与z轴夹角，默认小于等于pi**（可以理解为对于xOy上从原点引出的某个角度的向量，只对应0-pi的z方向）
$$
\iiint_{\Omega}dxdydz=\iiint_{\Omega}r^2 dr sin\phi d\phi d\theta
$$

$$
x=r sin\phi cos\theta,y=r sin\phi sin\theta,z=r cos\phi
$$

$$
注意\phi \in [0,\pi]
$$

> 举个:chestnut:：求球体积
>
> 如果只求z正向的半球，theta就是[0,2pi],phi是[0,pi/2]
>
> 如果只求y正向的半球，theta是[0,pi],phi是[0,pi]
>
> 如果只求x正向的半球，theta是[-pi/2,pi/2],phi是[0,pi]

$$
V=\int_0^{2\pi}d\theta \int_0^{a}r^2dr\int_0^\pi sin\phi d\phi=\frac{4\pi a^2}{3}
$$

三重积分先2后1法：
$$
\iiint_{\Omega}Pdxdydz=\int_{0}^{h} Pdz\iint_{D}dxdy
$$
用**只含z的式子**确定xOy上投影D的范围（经常**通过曲面的联立**），便于计算P只含z的题目

锥面x^2+y^2=z^2,z=h这种题适用

例如计算xy=z,x+y-1=0,z=0围成的闭区域：z=0和xy=z的交线是x=0和y=0，因此有范围0<=x<=1,0<=y<=1-x,0<=z<=xy、



几何应用：重积分求面积

曲面方程：z=z(x,y)
$$
\iint_{D_{xy}}\sqrt{z^2_x+z^2_y+1}dxdy
$$
Dxy按照z确定上下界

同济P170求球体表面积

------

## 三、曲线积分与曲面积分

:peach:曲线积分就是将d统一成dt，曲面积分将d*d统一成dxdy

### 第一型曲线积分：对弧长积

$$
\int_{L}f(x,y)ds=\int_a^bf[x(t),y(t)]\sqrt{x'^2(t)+y'^2(t)}dt
$$

因为对弧长积，所以结果恒为正，因此a一定小于b

**曲线积分，曲线方程可以直接带入被积函数**

:star:给定L极坐标方程时的第一型曲线积分：
$$
r=r(\theta),(默认：x=r(\theta)cos\theta,y=r(\theta)sin\theta)
$$

$$
ds=\sqrt{r'^2(\theta)+r^2(\theta)}d\theta
$$

exp:心形线r=a(1+cost)

------

### 第二型曲线积分：对坐标积

$$
\int_LPdx+Qdy=\int_a^bPx'(t)+Qy'(t)dt
$$

如果P除了x还含有其他变量，就要利用曲线方程统一成x

如果是两点之间的直线作为L，要列出两个等号的直线表达式，然后根据比例换元



√一种情况是y=x^2 x∈[-1,1]，此时如果对y积，就是[1,1]了（因为两段上用y表示的x不一致），显然不行，所以要分段或者对x积

------

### 第一型曲面积分：对面积积

$$
\iint_Df(x,y,z)dS=\iint_Df(x,y,z(x,y))\sqrt{z'^2(x)+z'^2(y)+1}dxdy
$$

化成以D（xOy）为底，以f为顶的二重积分，并且将z用xy表示带回f中，注意**面积微元的系数!**
$$
dS->系数dxdy->系数rdrd\theta
$$
经常使用极坐标方程代换，参见同济P223(4)

**曲面积分，曲面方程可以直接带入被积函数**，*但是如果条件是曲面被曲线方程围成，那肯定不能把曲线方程带进去*

------

### 第二型曲面积分：对坐标积

> 规定曲面的正方向为上、前、右，只要哪个是反向，就在面积微元前面加负号（见同济P230）
>
> dScosdelta=-dxdy

$$
\iint_{S}Pdydz+Qdxdz+Rdxdy=\iint_S(Pcos\alpha+Qcos\beta+Rcos\delta) dS
$$

1.先求法向量（**只有两种，取决于曲面的z的方向**）：
$$
z正向：(-z'_x,-z'_y,1)，z负向：(z'_x.z'_y,-1)
$$
2.**多种面积微元时，借助单位法向量对应的单位余弦之比化成一种面积微元**：
$$
(cos\alpha,cos\beta,cos\delta)=\frac{1}{\sqrt{z'^2_x+z'^2_y+1}}(-z'_x,-z'_y,1)
$$

$$
dydz=dScos\alpha,dxdz=dScos\beta,dxdy=dScos\delta
$$

$$
dydz=dxdy\frac{cos\alpha}{cos\delta}
$$

3.最后相当于求解：
$$
\iint_{S}R_{new}dxdy
$$
:orange:***做所有题之前看看能不能根据对称性化简被积函数***参见同济P231（例3）



------

### 格林公式：简化第二型曲线积分的计算

$$
\oint_L Pdx+Qdy=\iint_D \frac{\partial Q}{\partial x}-\frac{\partial P}{\partial y}dxdy
$$

注意L是D的正向！

题目要求左面的值，经常是先计算右边的Qx和Py，两者相等

#### 在非连续点处，挖一个圆周（注意l取和L相同方向）

$$
l:x^2+y^2=r^2
$$

于是
$$
\oint_L-\oint_l=0
$$
然后小圆的积分好算，用极坐标代换即可，参见同济P208

##### 格林公式求面积

$$
P=-x,Q=y,\iint_D Pdx+Qdy=2S
$$

##### 二元函数全微分求积

如果Py=Qx,则原函数是某函数u的全微分

求u时，选取(0,0)->(x,0)->(x,y)或者(0,0)->(0,y)->(x,y)作为路径L1+L2，再求曲线积分即可（当然不封闭不能用格林了），参见同济P213和P218.10(7)，注意通解要+C

#### 积分与路径无关的概念

如果P和Q**在区域G上有一阶连续偏导数**，且在G内任意闭曲线L上，有
$$
\frac{\partial Q}{\partial x}-\frac{\partial P}{\partial y}=0
$$
则在L上的第二型曲线积分与路径无关，并且=0

**但是，如果G上有奇异点，那么就需要挖去一个圆，剩下的部分满足定理积分为0，也就是这样把一个积分化成一个小圆的简单积分，这个结果是一个定值**

------

### 高斯公式：简化第二型曲面积分的计算

$$
\iint_\Sigma Pdydz+Qdxdz+Rdxdy=\iiint_\Omega (\frac{\partial P}{\partial x}+\frac{\partial Q}{\partial y}+\frac{\partial R}{\partial z}) dxdydz
$$

注意sigma是omega的**外侧**！！！
$$
dV=dxdydz
$$

------


### 斯托克斯公式：三维空间上的第二型曲线积分

$$
\oint_L Pdx+Qdy+Rdz=\iint_D
\begin{vmatrix}

     dydz & dxdz & dxdy \\

     \frac{\partial }{\partial x} & \frac{\partial }{\partial y} & \frac{\partial }{\partial z} \\
     
     P & Q & R

\end{vmatrix}
$$

### :warning:补充：

$$
星形线：x=acos^3t,y=asin^3t,t\in[0,2\pi]
$$

$$
心形线：r=a(1+cost),t\in[-\pi,\pi]
$$

三角积分
$$
\int sin^3tdt=\frac{1}{12}(cos3t-9cost)+C
$$

$$
\int cos^3tdt=\frac{1}{12}(sin3t+9sint)+C
$$

$$
\int cos^4tdt=\frac{1}{32}(12t+8sin2t+sin4t)+C
$$

$$
\int sin^4tdt=\frac{1}{32}(12t-8sin2t+sin4t)+C
$$

$$
\int cos^2tsin^2tdt=\frac{1}{32}(4t-sin4t)+C
$$

强大的求高次三角函数积分公式
$$
cos^mx=\frac{sinxcos^{m-1}x}{m}+\frac{m-1}{m}\int cos^{m-2}xdx
$$

$$
sin^mx=-\frac{cosxsin^{m-1}x}{m}+\frac{m-1}{m}\int sin^{m-2}xdx
$$


二三重积分经常考察换元，三重积分换元x,y,z->u,v,w需要乘以雅可比行列式
$$
J=\frac{\partial(x,y,z) }{\partial(u,v,w)}=\frac{dxdydz}{dudvdw}
$$

$$
dxdydz=
\begin{vmatrix}

	x'_u   & x'_v & x'_w \\
    y'_u   & y'_v & y'_w \\
    z'_u   & z'_v & z'_w \\

\end{vmatrix}dudvdw
$$
